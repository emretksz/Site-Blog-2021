@model FiveSessionWebMvcApp.Models.ViewModels.BlogViewModel
@{
    ViewBag.Title = "Blog";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<!-- ======= Blog Section ======= -->
<section class="breadcrumbs">
    <div class="container">

        <div class="d-flex justify-content-between align-items-center">
            <h2>Blog</h2>

            <ol>
                <li><a href="index.html">Home</a></li>
                <li>@ViewBag.Title</li>
            </ol>
        </div>

    </div>
</section><!-- End Blog Section -->
<!-- ======= Blog Section ======= -->
<section class="blog aos-init aos-animate" data-aos="fade-up" data-aos-easing="ease-in-out" data-aos-duration="500">
    <div class="container">

        <div class="row">

            <div id="blog-list" class="col-lg-8 entries">
                @Html.Partial("_BlogList",Model.Blogs)

            </div><!-- End blog entries list -->

            <div class="col-lg-4">
                <div class="sidebar">

                    <h3 class="sidebar-title">Search</h3>
                    <div class="sidebar-item search-form">
                        <form action="">
                            <input type="text">
                            <button type="submit"><i class="icofont-search"></i></button>
                        </form>
                    </div><!-- End sidebar search formn-->

                    <h3 class="sidebar-title">Categories</h3>
                    <div class="sidebar-item categories">
                        <ul>
                            @foreach (var category in Model.Categories)
                            {
                                @*<li><a href="@Url.Action("Blog","Home",new {categoryId=category.CategoryId })">@category.Name <span>(@category.Blogs.Count)</span></a></li>*@
                                <li><a onclick="BlogFilter(@(category.CategoryId))">@category.Name <span>(@category.Blogs.Count)</span></a></li>
                            }
                            @*<li><a href="#">General <span>(25)</span></a></li>
        <li><a href="#">Lifestyle <span>(12)</span></a></li>
        <li><a href="#">Travel <span>(5)</span></a></li>
        <li><a href="#">Design <span>(22)</span></a></li>
        <li><a href="#">Creative <span>(8)</span></a></li>
        <li><a href="#">Educaion <span>(14)</span></a></li>*@
                        </ul>

                    </div><!-- End sidebar categories-->

                    <h3 class="sidebar-title">Recent Posts</h3>
                    <div class="sidebar-item recent-posts">
                        @foreach (var blog in Model.Blogs.OrderByDescending(b => b.BlogId).Take(5))
                        {
                            <div class="post-item clearfix">
                                <img src="@blog.ImageURL" alt="">
                                <h4><a href="@Url.Action("BlogDetails","Home",new {id=blog.BlogId })">@blog.Title</a></h4>
                                <time datetime="@blog.BlogDate.Value.ToString("yyyy-MM-dd")">@blog.BlogDate.Value.ToString("MMM dd, yyyy")</time>
                            </div>
                        }
                        @*<div class="post-item clearfix">
                                <img src="~/Content/img/recent-posts-1.jpg" alt="">
                                <h4><a href="blog-single.html">Nihil blanditiis at in nihil autem</a></h4>
                                <time datetime="2020-01-01">Jan 1, 2020</time>
                            </div>

                            <div class="post-item clearfix">
                                <img src="~/Content/img/recent-posts-2.jpg" alt="">
                                <h4><a href="blog-single.html">Quidem autem et impedit</a></h4>
                                <time datetime="2020-01-01">Jan 1, 2020</time>
                            </div>

                            <div class="post-item clearfix">
                                <img src="~/Content/img/recent-posts-3.jpg" alt="">
                                <h4><a href="blog-single.html">Id quia et et ut maxime similique occaecati ut</a></h4>
                                <time datetime="2020-01-01">Jan 1, 2020</time>
                            </div>

                            <div class="post-item clearfix">
                                <img src="~/Content/img/recent-posts-4.jpg" alt="">
                                <h4><a href="blog-single.html">Laborum corporis quo dara net para</a></h4>
                                <time datetime="2020-01-01">Jan 1, 2020</time>
                            </div>

                            <div class="post-item clearfix">
                                <img src="~/Content/img/recent-posts-5.jpg" alt="">
                                <h4><a href="blog-single.html">Et dolores corrupti quae illo quod dolor</a></h4>
                                <time datetime="2020-01-01">Jan 1, 2020</time>
                            </div>*@
                    </div><!-- End sidebar recent posts-->

                    <h3 class="sidebar-title">Tags</h3>
                    <div class="sidebar-item tags">
                        <ul>
                            @foreach (var tag in Model.Tags)
                            {
                                <li><a href="@Url.Action("Blog","Home",new {tagId=tag.TagId})">@tag.Name</a></li>
                            }
                            @*<li><a href="#">App</a></li>
                                <li><a href="#">IT</a></li>
                                <li><a href="#">Business</a></li>
                                <li><a href="#">Business</a></li>
                                <li><a href="#">Mac</a></li>
                                <li><a href="#">Design</a></li>
                                <li><a href="#">Office</a></li>
                                <li><a href="#">Creative</a></li>
                                <li><a href="#">Studio</a></li>
                                <li><a href="#">Smart</a></li>
                                <li><a href="#">Tips</a></li>
                                <li><a href="#">Marketing</a></li>*@
                        </ul>

                    </div><!-- End sidebar tags-->

                </div><!-- End sidebar -->

            </div><!-- End blog sidebar -->

        </div><!-- End .row -->

    </div><!-- End .container -->

</section><!-- End Blog Section -->

@section Script{
    <!--Beğeni-->
    <script>
        //$(document).ready(function () {
        //    $('.change-heart').removeClass('far');
        //    $('.change-heart').addClass('fas');
        //})
        var counter = 1;
        $('.change-heart').click(function () {
            //var heart = 'Tıklandı';
            //alert(heart);
            if (counter == 1) {
                $(this).removeClass('far');
                $(this).addClass('fas');
                var a = $('.change-heart-number').text();
                $('.change-heart-number').text(parseInt(a) + 1)
                counter++;
            }
            else {
                $(this).removeClass('fas');
                $(this).addClass('far');
                var a = $('.change-heart-number').text();
                $('.change-heart-number').text(parseInt(a) - 1)
                counter--;
            }


        })
    </script>
    <!--Blog List-->
    <script>
        function BlogFilter(categoryId, tagId) {
            $.ajax({
                url: '/Home/BlogList',
                method: 'GET',
                data: { categoryId, tagId },
                success: function (data) {
                    $('#blog-list').html(data);
                },
                error: function (data) {
                    alert('Bir Hata oluştu!');
                }
            })
        }
    </script>
}
